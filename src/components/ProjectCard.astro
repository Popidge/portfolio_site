---
import type { CollectionEntry } from 'astro:content';

interface Props {
  project: CollectionEntry<'projects'>;
  index?: number;
}

const { project, index = 0 } = Astro.props;
const { data, slug } = project;
---

<article
  class="group bg-[var(--bg-card)] border-2 border-[var(--text-muted)]/30 animate-fadeInUp hover:border-[var(--color-vhs-gold)] transition-colors"
  style={`animation-delay: ${index * 0.1}s`}
>
  {/* VHS Header */}
  <div class="border-b-2 border-[var(--text-muted)]/30 p-4 flex justify-between items-center bg-[var(--bg-secondary)]">
    <div class="flex items-center gap-3">
      <span class="font-['JetBrains_Mono'] text-xs text-[var(--color-vhs-cinnabar)]">VHS</span>
      <span class="font-['Inter'] font-bold text-sm text-[var(--text-primary)]">{String(index + 1).padStart(2, '0')}</span>
    </div>
    <span class="font-['JetBrains_Mono'] text-xs text-[var(--text-muted)]">E-120</span>
  </div>
  
  {/* Cover Image Area */}
  <div class="relative aspect-video bg-black overflow-hidden">
    {/* Placeholder for project image - using gradient as fallback */}
    <div class="absolute inset-0" style={`background: linear-gradient(135deg, ${index % 2 === 0 ? 'var(--color-vhs-ocean)' : 'var(--color-vhs-cinnabar)'} 0%, var(--bg-primary) 100%); opacity: 0.5;`}></div>
    
    {/* Project title overlay */}
    <div class="absolute inset-0 flex items-center justify-center p-6">
      <h3 class="font-['Inter'] font-black text-xl md:text-2xl text-white uppercase text-center leading-tight drop-shadow-lg">
        {data.title}
      </h3>
    </div>
    
    {/* Scanline overlay */}
    <div class="absolute inset-0" style="background: repeating-linear-gradient(0deg, rgba(0,0,0,0.3) 0px, transparent 1px, transparent 3px); background-size: 100% 4px;"></div>
    
    {/* Category badge */}
    <div class="absolute top-2 right-2 px-2 py-1 bg-[var(--color-vhs-cinnabar)] text-white font-['JetBrains_Mono'] text-xs">
      {data.category.toUpperCase()}
    </div>
  </div>
  
  {/* Content */}
  <div class="p-4">
    <p class="font-['Inter'] text-sm text-[var(--text-secondary)] mb-4 line-clamp-2">
      {data.description}
    </p>
    
    {/* Tech specs */}
    <div class="flex flex-wrap gap-2 mb-4">
      {data.technologies.slice(0, 3).map((tech: string) => (
        <span class="font-['JetBrains_Mono'] text-xs text-[var(--color-vhs-gold)] bg-[var(--bg-primary)] px-2 py-1 border border-[var(--text-muted)]/20">
          {tech}
        </span>
      ))}
    </div>
    
    {/* Links */}
    <div class="flex gap-3 pt-3 border-t border-[var(--text-muted)]/20">
      {data.github && (
        <a
          href={data.github}
          class="font-['JetBrains_Mono'] text-xs text-[var(--text-muted)] hover:text-[var(--color-vhs-gold)] transition-colors"
          target="_blank"
          rel="noopener noreferrer"
        >
          [SOURCE]
        </a>
      )}
      {data.demo && (
        <a
          href={data.demo}
          class="font-['JetBrains_Mono'] text-xs text-[var(--text-muted)] hover:text-[var(--color-vhs-gold)] transition-colors"
          target="_blank"
          rel="noopener noreferrer"
        >
          [PLAY]
        </a>
      )}
    </div>
  </div>
  
  {/* Bottom accent stripe */}
  <div class="h-1 w-full bg-[var(--color-vhs-cinnabar)]"></div>
</article>
